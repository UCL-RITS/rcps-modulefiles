#%Module -*- tcl -*-
##
## dot modulefile
##
## R 3.2.2 compiled with GCC 4.9.2 + OpenBLAS
##
## Brian Alston November 2015 - first version using OpenBLAS insteasd of Atlas.
##

# New Legion modules layout

proc ModulesHelp { } {
    puts stderr "Adds R 3.2.2 and Bioconductor 3.2 GCC+OpenBLAS to your environment."
    puts stderr ""
    puts stderr "R is a language and environment for statistical computing and"
    puts stderr "graphics which provides a wide variety of statistical and"
    puts stderr "graphical techniques: linear and nonlinear modelling,"
    puts stderr "statistical tests, time series analysis, classification,"
    puts stderr "clustering, etc. "
    puts stderr ""
    puts stderr "This version of R has been compiled with GCC 4.9.2 and the OpenBLAS"
    puts stderr "high performance BLAS library."
    puts stderr ""
    puts stderr "Bioconductor is a set of R packages that provide tools for the analysis"
    puts stderr "and comprehension of high-throughput genomic data."
    puts stderr ""
    puts stderr "Directory: /shared/ucl/apps/R/R-3.2.2-OpenBLAS/"
}

module-whatis "Adds R 3.2.2 and Bioconductor 3.2 to your environment."

# Location of R:

set prefix /shared/ucl/apps/R/R-3.2.2-OpenBLAS

prereq gcc-libs/4.9.2
prereq compilers/gnu/4.9.2
prereq openblas/0.2.14/gnu-4.9.2
prereq java/1.8.0_45
prereq fftw/3.3.4/gnu-4.9.2
prereq ghostscript/9.16/gnu-4.9.2
prereq texinfo/5.2/gnu-4.9.2
prereq texlive/2014
prereq gsl/1.16/gnu-4.9.2
prereq hdf/5-1.8.15/gnu-4.9.2
prereq netcdf/4.3.3.1/gnu-4.9.2
prereq jags/3.4.0/gnu.4.9.2-openblas

prepend-path PATH		$prefix/bin
prepend-path MANPATH		$prefix/share/man
append-path  LD_LIBRARY_PATH	$prefix/lib64/R/lib
setenv 	     R_BROWSER		firefox

# Databases need to be stored on Lustre not NFS
setenv       R_LIBS_SITE	/home/ccspapp/Scratch/R/R-3.2.2-OpenBLAS/library

prepend-path CMAKE_PREFIX_PATH $prefix
